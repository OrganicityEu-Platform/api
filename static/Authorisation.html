<!DOCTYPE html>
<html>
<head>
  <title>OrganiCity API</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="oc.css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js">
  </script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js">
  </script>
  <![endif]-->
</head>
<body>
  <div id="top" class="container oc-page-wrapper">
  <div class="row">
    <nav role="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand active" href="http://organicity.eu/">
            <img src="static/img/oc_logo.png">
          </a>
          <button class="navbar-toggle" type="button">
            <span class="sr-only">Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
          </button>
        </div>
        <div class="navbar-collapse collapse" aria-expanded="false">
          <span class="oc-left-links-wrapper">
          </span>
          <ul class="nav navbar-nav navbar-right">
            <li role="presentation">
              <a href="index.html" aria-selected="false">Overview
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
  <div class="container">
    <h1>OrganiCity Authorisation Testing</h1>
    <p><p>As users interact with the OrganiCity facility, they need to
    perform tasks that may not be available to any user, but only to a
    specific set. These are restricted by access rules, which are in
    turn enforced by an authorisation server.</p>
    <p>This specification describes the endpoints that OC facility
    services can use to query a users information and permissions.</p>
    <h2 id="authentication-tokens">Authentication Tokens</h2>
    <p>All users of the OrganiCity facility will authenticate to
    OrganiCity services via an authentication token. This holds true
    for all communication that requests a protected functionality,
    especially, but not limited to the following:</p>
    <ul>
    <li>A human user requesting a list of available data sources,</li>
    <li>an OrganiCity site manager administering his site&#39;s settings,</li>
    <li>an experiment run on a smart phone that wants to push new data, or</li>
    <li>a OrganiCity service that wants to check if a user is allowed to
    perform a certain action.</li>
    </ul>
    <p>Authentication tokens are granted by the authentication server
    upon login, and are usually valid only for the current session. To
    obtain a unique user identifier, a service has to query the
    <a href="Authentication.html">authentication service</a> for the user
    profile.</p>
    <h2 id="general-workflow-for-authorisation">General Workflow for Authorisation</h2>
    <p>We assume that a user (that is, human or technical users) has already
    <a href="Authentication.html">authenticated to the authentication server</a>,
    and has been handed an authentication token from his authentication
    provider (e.g. Facebook).</p>
    <p>When the user now tries to access a protected functionality, she
    supplies this authentication token as a header of the HTTP request,
    as specified by the API. For uniformity, we recommend calling this
    field <code>Authentication</code>.</p>
    <p>The functionality provider now checks if this user is authorised
    to access its functionality by asking the authorisation server,
    supplying the authentication token and an functionality
    identifier. For example, if a user with authentication token
    <code>Fwxfy9mXE</code> wants to read data from a Santander data source, the
    following authorisation check description may be used:</p>
    <pre><code>{<br>  "<span class="hljs-attribute">user</span>": <span class="hljs-value"><span class="hljs-string">"Fwxfy9mXE"</span></span>,<br>  "<span class="hljs-attribute">action</span>": <span class="hljs-value"><span class="hljs-string">"read:Santander"</span><br></span>}
    </code></pre><p>The authorisation server may in turn ask the authentication server
    for more detailed information about the user, e.g. to check if the
    user has a specific role that might grant authorisation, and replies
    to the functionality provider with a boolean value describing if
    the user may access the functionality.</p>
    <h2 id="functionality-identifiers">Functionality Identifiers</h2>
    <p>Functionality Identifiers are the single access permissions that a
    user may be given, and are thus specific to the concrete
    functionality.  Consequently, the list of permissions that a
    service may want to check needs to be defined by the service developer
    himself.</p>
    <p>To the authorisation server, a functionality identifier is just a
    string without any inherently attached meaning. While the
    functionality provider needs to think about the meaning of such an
    identifier, it is also free do to so: <a href="AuthorisationManagement.html">Assignment of
    permissions</a> to users is as well
    agnostic of the permission&#39;s meaning, so that again no functional
    knowledge is required.</p>
    <h2 id="future-work">Future work</h2>
    <ul>
    <li>Checks specific to an object: Check if a user may read a specific
    data source</li>
    </ul>
    </p>
    
    
    <div id="sw-schemes" class="sw-default-value">
        <span class="sw-default-value-header">Schemes:</span>
        http
    </div>
    
        <h2 id="swagger--summary-no-tags">Summary</h2>
        
            <div class="panel">
              <div class="panel-body">
        
        <table class="table table-condensed swagger--summary">
            <thead>
            <tr>
                <th>Path</th>
                <th>Operation</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
                    <tr>
                            <td class="swagger--summary-path" rowspan="1">
                                <a href="#path--check">/check</a>
                            </td>
                        <td>
                            <a href="#operation--check-post">POST</a>
                        </td>
                        <td>
                            <p>Determines if a user is authorised to perform a specific action</p>
        
                        </td>
                    </tr>
            </tbody>
        </table>
        
              </div>
            </div>
    
    
    
    <h2>Paths</h2>
    
        
        <span id="path--check"></span>
            <div id="operation--check-post" class="swagger--panel-operation-post panel">
                <div class="panel-heading">
                    <div class="operation-summary">Determines if a user is authorised to perform a specific action</div>
                    <h3 class="panel-title"><span class="operation-name">POST</span> <strong>/check</strong></h3>
                </div>
                <div class="panel-body">
                    <section class="sw-operation-description">
                        
                    </section>
                        
                        <section class="sw-request-body">
                          
                             <p><p>The request body describes the action in question. This is
                        a JSON record that contains a list of fields describing
                        the action in detail.</p>
                        </p>
                              <div class="row body-content">
                               <div class="col-md-6 sw-request-model">
                                
                                    <div id="definition-action" class="panel panel-definition">
                                        <div class="panel-heading">
                                          <h3 class="panel-title">
                                              action:
                                              <span class="json-property-type"><span class="json-property-type">object</span>
                                    <span class="json-property-range" title="Value limits"></span>
                                    
                                    </span>
                                          </h3>
                                        </div>
                                      <div class="panel-body">
                                          
                                                  <section class="json-schema-properties">
                                                      <dl>
                                                              <dt data-property-name="user">
                                                                  <span class="json-property-name">user:</span>
                                                                  <span class="json-property-type">string</span>
                                                                  <span class="json-property-range" title="Value limits"></span>
                                                                  
                                                                      <span class="json-property-required"></span>
                                                              </dt>
                                                              <dd>
                                                                  <p>The user authentication token, as supplied by the
                                                  OrganiCity <a href="Authentication.html">authentication server</a>.</p>
                                                  
                                                                  <div class="json-inner-schema">
                                                                      
                                                                  </div>
                                                              </dd>
                                                              <dt data-property-name="action">
                                                                  <span class="json-property-name">action:</span>
                                                                  <span class="json-property-type">string</span>
                                                                  <span class="json-property-range" title="Value limits"></span>
                                                                  
                                                                      <span class="json-property-required"></span>
                                                              </dt>
                                                              <dd>
                                                                  <p>The action that the user should be authorised against.</p>
                                                  <p>This is a technical identifier of a specific list of
                                                  actions available. This list may change over time, as
                                                  new OrganiCity services provide new functionality that
                                                  requires authorisation.</p>
                                                  
                                                                  <div class="json-inner-schema">
                                                                      
                                                                  </div>
                                                              </dd>
                                                      </dl>
                                                  </section>
                                      </div>
                                    </div>
                               </div>
                              </div>
                        </section>
                    
                        <section class="sw-request-params">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th class="sw-param-name"></th>
                                    <th class="sw-param-description"></th>
                                    <th class="sw-param-type"></th>
                                    <th class="sw-param-data-type"></th>
                                    <th class="sw-param-annotation"></th>
                                </tr>
                                </thead>
                                <tbody>
                                        <tr>
                                            <td>
                                                Authentication
                                            <td><p>As not everybody may check if a user has a specific
                                        permission, calls to the authorisation check need to be
                                        authorised as well. Usually, this is the authentication
                                        token of an OrganiCity service.</p>
                                        </td>
                                            <td>header</td>
                                            <td><span class="json-property-type">string</span>
                                        <span class="json-property-range" title="Value limits"></span>
                                        
                                            </td>
                                            <td>
                                                    <span class="json-property-required"></span>
                                            </td>
                                        </tr>
                                </tbody>
                            </table>
                        </section>
                    
                      <section class="sw-responses">
                          <p><span class="label label-default">application/json</span> 
                    </p>
                    
                        <dl>
                            <dt class="sw-response-200">
                              200 OK
                    
                            </dt>
                            <dd class="sw-response-200">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The authorisation request has been processed successfully,
                                and the result is supplied within the response body as a
                                boolean value.</p>
                                <p>Please note that a reply of <code>200</code> may not mean that the
                                requested action is allowed, but only that the authorisation
                                check was performed successfully.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                  <div class="row body-content">
                                    <div class="col-md-6 sw-response-model">
                                          
                                              <div id="definition-Body-Schema" class="panel panel-definition">
                                                  <div class="panel-heading">
                                                    <h3 class="panel-title">
                                                        Body Schema:
                                                        <span class="json-property-type"><span class="json-property-type">boolean</span>
                                              <span class="json-property-range" title="Value limits"></span>
                                              
                                              </span>
                                                    </h3>
                                                  </div>
                                                <div class="panel-body">
                                                        <section class="json-schema-description">
                                                            <p>True, if the user is allowed to perform the given action,
                                                    false otherwise.</p>
                                                    
                                                        </section>
                                                    
                                                </div>
                                              </div>
                                    </div>
                                  </div>
                                
                            </dd>
                            <dt class="sw-response-401">
                              401 Unauthorized
                    
                            </dt>
                            <dd class="sw-response-401">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The caller did not provide sufficient authentication to
                                verify that she is allowed to perform authorisation
                                checks.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                            <dt class="sw-response-403">
                              403 Forbidden
                    
                            </dt>
                            <dd class="sw-response-403">
                                
                                
                                <div class="row">
                                  <div class="col-md-12">
                                    <p>The requesting caller is not allowed to perform
                                authorisation checks.</p>
                                
                                  </div>
                                </div>
                                <div class="row">
                                </div>
                                
                                
                            </dd>
                        </dl>
                      </section>
                </div>
            </div>
     
    
                       
    
  </div>
  
  <div class="oc-footers">
    <div class="row oc-footer-large">
      <h1 class="oc-home-view-title">Follow us
      </h1>
      <div class="oc-footer-large-social-links">
        <a href="https://twitter.com/organicity_eu">
          <span class="fa fa-twitter">
          </span>
        </a>
        <a href="https://www.facebook.com/OrganiCities">
          <span class="fa fa-facebook-official">
          </span>
        </a>
      </div>
      <img class="oc-footer-large-eu-logo" src="static/img/logo_eu.png">
      </div>
      <div class="row oc-footer-small">
        <div class="col-md-2">&copy; OrganiCity 2015
        </div>
        <div class="col-md-1">
        </div>
        <div class="col-md-4">
          <a class="oc-link" href="http://organicity.eu/">VISIT ORGANICITY.EU TO FIND OUT MORE
          </a>
        </div>
        <div class="col-md-5">
          <div>
            <h4>Contact Us
            </h4>
              <a href="mailto:info@organicity.eu">info@organicity.eu
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
